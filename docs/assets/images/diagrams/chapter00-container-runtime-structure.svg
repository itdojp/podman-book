<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: 700 18px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .section-title { font: 600 14px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .layer-text { font: 500 12px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .component-text { font: 400 11px Inter, sans-serif; fill: var(--color-text-secondary, #4a5568); }
      .small-text { font: 400 10px Inter, sans-serif; fill: var(--color-text-secondary, #4a5568); }
      
      .user-space { fill: var(--color-blue-50, #ebf8ff); stroke: var(--color-blue-200, #90cdf4); }
      .kernel-space { fill: var(--color-purple-50, #faf5ff); stroke: var(--color-purple-200, #c084fc); }
      .runtime-high { fill: var(--color-green-50, #f0fff4); stroke: var(--color-green-200, #68d391); }
      .runtime-low { fill: var(--color-orange-50, #fffaf0); stroke: var(--color-orange-200, #fbb962); }
      .container { fill: var(--color-yellow-50, #fffff0); stroke: var(--color-yellow-200, #f6e05e); }
      .oci-spec { fill: var(--color-red-50, #fef5e7); stroke: var(--color-red-200, #fc8181); }
      .kernel-feature { fill: var(--color-indigo-50, #f0f9ff); stroke: var(--color-indigo-200, #a5b4fc); }
      .arrow { stroke: var(--color-gray-600, #718096); fill: var(--color-gray-600, #718096); }
      .divider { stroke: var(--color-gray-400, #a0aec0); stroke-dasharray: 5,5; }
    </style>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">コンテナ実行時構造図</text>

  <!-- User Space Section -->
  <g id="user-space">
    <rect x="50" y="60" width="800" height="300" class="user-space" />
    <text x="70" y="80" class="section-title">ユーザー空間</text>
    
    <!-- High-level Container Runtime -->
    <g id="high-level-runtime">
      <rect x="80" y="100" width="180" height="120" class="runtime-high" />
      <text x="170" y="120" text-anchor="middle" class="layer-text">上位レベル</text>
      <text x="170" y="135" text-anchor="middle" class="layer-text">コンテナランタイム</text>
      
      <rect x="90" y="150" width="70" height="25" class="container" />
      <text x="125" y="167" text-anchor="middle" class="small-text">Docker</text>
      
      <rect x="170" y="150" width="70" height="25" class="container" />
      <text x="205" y="167" text-anchor="middle" class="small-text">Podman</text>
      
      <rect x="90" y="180" width="70" height="25" class="container" />
      <text x="125" y="197" text-anchor="middle" class="small-text">containerd</text>
      
      <rect x="170" y="180" width="70" height="25" class="container" />
      <text x="205" y="197" text-anchor="middle" class="small-text">CRI-O</text>
    </g>
    
    <!-- OCI Runtime Spec -->
    <g id="oci-spec">
      <rect x="320" y="100" width="160" height="60" class="oci-spec" />
      <text x="400" y="120" text-anchor="middle" class="layer-text">OCI Runtime</text>
      <text x="400" y="135" text-anchor="middle" class="layer-text">Specification</text>
      <text x="400" y="150" text-anchor="middle" class="small-text">標準化されたインターフェース</text>
    </g>
    
    <!-- Low-level Container Runtime -->
    <g id="low-level-runtime">
      <rect x="540" y="100" width="180" height="120" class="runtime-low" />
      <text x="630" y="120" text-anchor="middle" class="layer-text">下位レベル</text>
      <text x="630" y="135" text-anchor="middle" class="layer-text">コンテナランタイム</text>
      
      <rect x="550" y="150" width="70" height="25" class="container" />
      <text x="585" y="167" text-anchor="middle" class="small-text">runc</text>
      
      <rect x="630" y="150" width="70" height="25" class="container" />
      <text x="665" y="167" text-anchor="middle" class="small-text">crun</text>
      
      <rect x="550" y="180" width="70" height="25" class="container" />
      <text x="585" y="197" text-anchor="middle" class="small-text">kata</text>
      
      <rect x="630" y="180" width="70" height="25" class="container" />
      <text x="665" y="197" text-anchor="middle" class="small-text">gVisor</text>
    </g>
    
    <!-- Container Process -->
    <g id="container-process">
      <rect x="80" y="250" width="160" height="80" class="container" />
      <text x="160" y="270" text-anchor="middle" class="layer-text">コンテナプロセス</text>
      <text x="160" y="285" text-anchor="middle" class="small-text">PID Namespace</text>
      <text x="160" y="300" text-anchor="middle" class="small-text">Mount Namespace</text>
      <text x="160" y="315" text-anchor="middle" class="small-text">Network Namespace</text>
    </g>
    
    <!-- Image Store -->
    <g id="image-store">
      <rect x="280" y="250" width="120" height="80" class="runtime-high" />
      <text x="340" y="270" text-anchor="middle" class="layer-text">イメージストア</text>
      <text x="340" y="285" text-anchor="middle" class="small-text">レイヤー管理</text>
      <text x="340" y="300" text-anchor="middle" class="small-text">メタデータ</text>
      <text x="340" y="315" text-anchor="middle" class="small-text">設定ファイル</text>
    </g>
    
    <!-- Container Store -->
    <g id="container-store">
      <rect x="440" y="250" width="120" height="80" class="runtime-high" />
      <text x="500" y="270" text-anchor="middle" class="layer-text">コンテナストア</text>
      <text x="500" y="285" text-anchor="middle" class="small-text">実行時情報</text>
      <text x="500" y="300" text-anchor="middle" class="small-text">状態管理</text>
      <text x="500" y="315" text-anchor="middle" class="small-text">ログ</text>
    </g>
    
    <!-- Network -->
    <g id="network">
      <rect x="600" y="250" width="120" height="80" class="runtime-low" />
      <text x="660" y="270" text-anchor="middle" class="layer-text">ネットワーク</text>
      <text x="660" y="285" text-anchor="middle" class="small-text">CNI Plugins</text>
      <text x="660" y="300" text-anchor="middle" class="small-text">ブリッジ</text>
      <text x="660" y="315" text-anchor="middle" class="small-text">iptables</text>
    </g>
  </g>

  <!-- Divider Line -->
  <line x1="50" y1="380" x2="850" y2="380" class="divider" />
  
  <!-- Kernel Space Section -->
  <g id="kernel-space">
    <rect x="50" y="390" width="800" height="260" class="kernel-space" />
    <text x="70" y="410" class="section-title">カーネル空間</text>
    
    <!-- Namespaces -->
    <g id="namespaces">
      <rect x="80" y="430" width="150" height="100" class="kernel-feature" />
      <text x="155" y="450" text-anchor="middle" class="layer-text">Namespaces</text>
      <text x="155" y="470" text-anchor="middle" class="small-text">PID Namespace</text>
      <text x="155" y="485" text-anchor="middle" class="small-text">Network Namespace</text>
      <text x="155" y="500" text-anchor="middle" class="small-text">Mount Namespace</text>
      <text x="155" y="515" text-anchor="middle" class="small-text">UTS/IPC/User NS</text>
    </g>
    
    <!-- Cgroups -->
    <g id="cgroups">
      <rect x="260" y="430" width="150" height="100" class="kernel-feature" />
      <text x="335" y="450" text-anchor="middle" class="layer-text">Control Groups</text>
      <text x="335" y="470" text-anchor="middle" class="small-text">CPU制限</text>
      <text x="335" y="485" text-anchor="middle" class="small-text">メモリ制限</text>
      <text x="335" y="500" text-anchor="middle" class="small-text">I/O制限</text>
      <text x="335" y="515" text-anchor="middle" class="small-text">プロセス数制限</text>
    </g>
    
    <!-- Security -->
    <g id="security">
      <rect x="440" y="430" width="150" height="100" class="kernel-feature" />
      <text x="515" y="450" text-anchor="middle" class="layer-text">セキュリティ</text>
      <text x="515" y="470" text-anchor="middle" class="small-text">SELinux/AppArmor</text>
      <text x="515" y="485" text-anchor="middle" class="small-text">Seccomp</text>
      <text x="515" y="500" text-anchor="middle" class="small-text">Capabilities</text>
      <text x="515" y="515" text-anchor="middle" class="small-text">User Namespaces</text>
    </g>
    
    <!-- Storage -->
    <g id="storage">
      <rect x="620" y="430" width="150" height="100" class="kernel-feature" />
      <text x="695" y="450" text-anchor="middle" class="layer-text">ストレージ</text>
      <text x="695" y="470" text-anchor="middle" class="small-text">Union FS</text>
      <text x="695" y="485" text-anchor="middle" class="small-text">OverlayFS</text>
      <text x="695" y="500" text-anchor="middle" class="small-text">Device Mapper</text>
      <text x="695" y="515" text-anchor="middle" class="small-text">VFS</text>
    </g>
    
    <!-- Linux Kernel -->
    <g id="linux-kernel">
      <rect x="80" y="560" width="690" height="60" class="kernel-feature" />
      <text x="425" y="580" text-anchor="middle" class="layer-text">Linux Kernel</text>
      <text x="425" y="600" text-anchor="middle" class="component-text">システムコール、プロセス管理、メモリ管理、ファイルシステム、ネットワークスタック</text>
    </g>
  </g>

  <!-- Arrows showing interactions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow" />
    </marker>
  </defs>

  <!-- High-level to OCI -->
  <line x1="260" y1="160" x2="320" y2="130" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  
  <!-- OCI to Low-level -->
  <line x1="480" y1="130" x2="540" y2="160" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  
  <!-- Low-level to Kernel -->
  <line x1="630" y1="220" x2="515" y2="430" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  
  <!-- Data flow arrows -->
  <line x1="240" y1="290" x2="280" y2="290" stroke-width="1" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="400" y1="290" x2="440" y2="290" stroke-width="1" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="560" y1="290" x2="600" y2="290" stroke-width="1" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Legend -->
  <g id="legend" transform="translate(50, 670)">
    <text x="0" y="0" class="component-text">上位ランタイム: イメージ管理、ネットワーク設定、API提供</text>
    <text x="350" y="0" class="component-text">下位ランタイム: 実際のコンテナ作成とプロセス実行</text>
  </g>
</svg>