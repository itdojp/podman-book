<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: 700 18px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .section-title { font: 600 14px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .layer-text { font: 500 12px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .component-text { font: 400 11px Inter, sans-serif; fill: var(--color-text-secondary, #4a5568); }
      .small-text { font: 400 10px Inter, sans-serif; fill: var(--color-text-secondary, #4a5568); }
      
      .source { fill: var(--color-blue-50, #ebf8ff); stroke: var(--color-blue-200, #90cdf4); }
      .builder { fill: var(--color-green-50, #f0fff4); stroke: var(--color-green-200, #68d391); }
      .arch-specific { fill: var(--color-orange-50, #fffaf0); stroke: var(--color-orange-200, #fbb962); }
      .manifest { fill: var(--color-purple-50, #faf5ff); stroke: var(--color-purple-200, #c084fc); }
      .registry { fill: var(--color-yellow-50, #fffff0); stroke: var(--color-yellow-200, #f6e05e); }
      .platform { fill: var(--color-red-50, #fef5e7); stroke: var(--color-red-200, #fc8181); }
      .arrow { stroke: var(--color-gray-600, #718096); fill: var(--color-gray-600, #718096); }
      .process-flow { stroke: var(--color-blue-400, #4299e1); stroke-width: 2; }
    </style>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">マルチアーキテクチャビルドプロセス図</text>

  <!-- Source Code -->
  <g id="source-code">
    <text x="450" y="70" text-anchor="middle" class="section-title">ソースコード & Dockerfile</text>
    
    <rect x="200" y="80" width="120" height="60" class="source" />
    <text x="260" y="105" text-anchor="middle" class="layer-text">Application</text>
    <text x="260" y="120" text-anchor="middle" class="layer-text">Source Code</text>
    <text x="260" y="135" text-anchor="middle" class="small-text">Go/Java/Node.js</text>
    
    <rect x="350" y="80" width="120" height="60" class="source" />
    <text x="410" y="105" text-anchor="middle" class="layer-text">Dockerfile</text>
    <text x="410" y="120" text-anchor="middle" class="small-text">FROM node:16</text>
    <text x="410" y="135" text-anchor="middle" class="small-text">COPY . /app</text>
    
    <rect x="500" y="80" width="120" height="60" class="source" />
    <text x="560" y="105" text-anchor="middle" class="layer-text">Build Context</text>
    <text x="560" y="120" text-anchor="middle" class="small-text">Dependencies</text>
    <text x="560" y="135" text-anchor="middle" class="small-text">Config files</text>
  </g>

  <!-- Build Command -->
  <g id="build-command">
    <rect x="250" y="170" width="400" height="40" class="builder" />
    <text x="450" y="195" text-anchor="middle" class="layer-text">podman buildx build --platform linux/amd64,linux/arm64,linux/arm/v7</text>
  </g>

  <!-- Architecture-specific Builds -->
  <g id="arch-builds">
    <text x="450" y="250" text-anchor="middle" class="section-title">並列アーキテクチャビルド</text>
    
    <!-- AMD64 Build -->
    <g id="amd64-build">
      <rect x="80" y="270" width="140" height="120" class="arch-specific" />
      <text x="150" y="290" text-anchor="middle" class="layer-text">linux/amd64</text>
      <text x="150" y="310" text-anchor="middle" class="small-text">x86_64プロセッサ</text>
      <text x="150" y="330" text-anchor="middle" class="small-text">Native build</text>
      <text x="150" y="350" text-anchor="middle" class="small-text">最高性能</text>
      <text x="150" y="370" text-anchor="middle" class="component-text">Build time: 2分</text>
    </g>
    
    <!-- ARM64 Build -->
    <g id="arm64-build">
      <rect x="240" y="270" width="140" height="120" class="arch-specific" />
      <text x="310" y="290" text-anchor="middle" class="layer-text">linux/arm64</text>
      <text x="310" y="310" text-anchor="middle" class="small-text">ARM64プロセッサ</text>
      <text x="310" y="330" text-anchor="middle" class="small-text">QEMU emulation</text>
      <text x="310" y="350" text-anchor="middle" class="small-text">Apple M1/M2</text>
      <text x="310" y="370" text-anchor="middle" class="component-text">Build time: 5分</text>
    </g>
    
    <!-- ARM v7 Build -->
    <g id="armv7-build">
      <rect x="400" y="270" width="140" height="120" class="arch-specific" />
      <text x="470" y="290" text-anchor="middle" class="layer-text">linux/arm/v7</text>
      <text x="470" y="310" text-anchor="middle" class="small-text">ARMv7プロセッサ</text>
      <text x="470" y="330" text-anchor="middle" class="small-text">QEMU emulation</text>
      <text x="470" y="350" text-anchor="middle" class="small-text">Raspberry Pi</text>
      <text x="470" y="370" text-anchor="middle" class="component-text">Build time: 8分</text>
    </g>
    
    <!-- Build Environment -->
    <g id="build-env">
      <rect x="560" y="270" width="140" height="120" class="builder" />
      <text x="630" y="290" text-anchor="middle" class="layer-text">Build Environment</text>
      <text x="630" y="310" text-anchor="middle" class="small-text">buildah backend</text>
      <text x="630" y="330" text-anchor="middle" class="small-text">QEMU emulation</text>
      <text x="630" y="350" text-anchor="middle" class="small-text">binfmt_misc</text>
      <text x="630" y="370" text-anchor="middle" class="component-text">Cross compilation</text>
    </g>
  </g>

  <!-- Individual Images -->
  <g id="individual-images">
    <text x="450" y="430" text-anchor="middle" class="section-title">個別イメージ生成</text>
    
    <rect x="120" y="450" width="100" height="60" class="platform" />
    <text x="170" y="470" text-anchor="middle" class="component-text">myapp:latest</text>
    <text x="170" y="485" text-anchor="middle" class="small-text">linux/amd64</text>
    <text x="170" y="500" text-anchor="middle" class="small-text">sha256:abc123...</text>
    
    <rect x="250" y="450" width="100" height="60" class="platform" />
    <text x="300" y="470" text-anchor="middle" class="component-text">myapp:latest</text>
    <text x="300" y="485" text-anchor="middle" class="small-text">linux/arm64</text>
    <text x="300" y="500" text-anchor="middle" class="small-text">sha256:def456...</text>
    
    <rect x="380" y="450" width="100" height="60" class="platform" />
    <text x="430" y="470" text-anchor="middle" class="component-text">myapp:latest</text>
    <text x="430" y="485" text-anchor="middle" class="small-text">linux/arm/v7</text>
    <text x="430" y="500" text-anchor="middle" class="small-text">sha256:ghi789...</text>
  </g>

  <!-- Manifest Creation -->
  <g id="manifest-creation">
    <text x="650" y="430" text-anchor="middle" class="section-title">マニフェストリスト作成</text>
    
    <rect x="580" y="450" width="140" height="60" class="manifest" />
    <text x="650" y="470" text-anchor="middle" class="layer-text">Manifest List</text>
    <text x="650" y="485" text-anchor="middle" class="small-text">myapp:latest</text>
    <text x="650" y="500" text-anchor="middle" class="small-text">Multi-arch pointer</text>
  </g>

  <!-- Registry Push -->
  <g id="registry-push">
    <text x="450" y="550" text-anchor="middle" class="section-title">レジストリプッシュ</text>
    
    <rect x="350" y="570" width="200" height="60" class="registry" />
    <text x="450" y="590" text-anchor="middle" class="layer-text">Container Registry</text>
    <text x="450" y="605" text-anchor="middle" class="small-text">Docker Hub / Quay.io / Harbor</text>
    <text x="450" y="620" text-anchor="middle" class="component-text">podman push --all-tags myapp:latest</text>
  </g>

  <!-- Platform Detection -->
  <g id="platform-detection">
    <text x="450" y="670" text-anchor="middle" class="section-title">実行時プラットフォーム自動選択</text>
    
    <rect x="200" y="680" width="120" height="15" class="platform" />
    <text x="260" y="692" text-anchor="middle" class="small-text">AMD64 → amd64 image</text>
    
    <rect x="340" y="680" width="120" height="15" class="platform" />
    <text x="400" y="692" text-anchor="middle" class="small-text">ARM64 → arm64 image</text>
    
    <rect x="480" y="680" width="120" height="15" class="platform" />
    <text x="540" y="692" text-anchor="middle" class="small-text">ARMv7 → arm/v7 image</text>
  </g>

  <!-- Flow arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow" />
    </marker>
  </defs>

  <!-- Vertical flow -->
  <line x1="450" y1="150" x2="450" y2="170" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="450" y1="220" x2="450" y2="250" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Architecture builds to images -->
  <line x1="150" y1="400" x2="170" y2="450" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="310" y1="400" x2="300" y2="450" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="470" y1="400" x2="430" y2="450" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Images to manifest -->
  <line x1="480" y1="480" x2="580" y2="480" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Manifest to registry -->
  <line x1="650" y1="520" x2="500" y2="570" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Registry to platform detection -->
  <line x1="450" y1="640" x2="450" y2="670" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Command Examples -->
  <g id="commands" transform="translate(50, 720)">
    <text x="0" y="0" class="small-text">setup: podman run --privileged --rm tonistiigi/binfmt --install all</text>
    <text x="500" y="0" class="small-text">build: buildah bud --platform linux/amd64,linux/arm64</text>
  </g>
</svg>