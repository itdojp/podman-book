<svg width="900" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: 700 18px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .section-title { font: 600 14px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .layer-text { font: 500 12px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .component-text { font: 400 11px Inter, sans-serif; fill: var(--color-text-secondary, #4a5568); }
      .small-text { font: 400 10px Inter, sans-serif; fill: var(--color-text-secondary, #4a5568); }
      
      .config-file { fill: var(--color-blue-50, #ebf8ff); stroke: var(--color-blue-200, #90cdf4); }
      .command { fill: var(--color-green-50, #f0fff4); stroke: var(--color-green-200, #68d391); }
      .process { fill: var(--color-orange-50, #fffaf0); stroke: var(--color-orange-200, #fbb962); }
      .container { fill: var(--color-purple-50, #faf5ff); stroke: var(--color-purple-200, #c084fc); }
      .network { fill: var(--color-yellow-50, #fffff0); stroke: var(--color-yellow-200, #f6e05e); }
      .volume { fill: var(--color-indigo-50, #f0f9ff); stroke: var(--color-indigo-200, #a5b4fc); }
      .arrow { stroke: var(--color-gray-600, #718096); fill: var(--color-gray-600, #718096); }
    </style>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">Podman Compose ワークフロー図</text>

  <!-- Step 1: Configuration Files -->
  <g id="step1">
    <text x="100" y="70" class="section-title">1. 設定ファイル準備</text>
    
    <rect x="50" y="80" width="150" height="80" class="config-file" />
    <text x="125" y="105" text-anchor="middle" class="layer-text">docker-compose.yml</text>
    <text x="125" y="125" text-anchor="middle" class="small-text">services:</text>
    <text x="125" y="140" text-anchor="middle" class="small-text">  web: nginx</text>
    <text x="125" y="155" text-anchor="middle" class="small-text">  app: node:16</text>
    
    <rect x="220" y="80" width="120" height="80" class="config-file" />
    <text x="280" y="105" text-anchor="middle" class="layer-text">.env ファイル</text>
    <text x="280" y="125" text-anchor="middle" class="small-text">環境変数設定</text>
    <text x="280" y="140" text-anchor="middle" class="small-text">DB_PASSWORD=***</text>
    <text x="280" y="155" text-anchor="middle" class="small-text">API_KEY=***</text>
  </g>

  <!-- Step 2: Command Execution -->
  <g id="step2">
    <text x="450" y="70" class="section-title">2. コマンド実行</text>
    
    <rect x="380" y="80" width="160" height="40" class="command" />
    <text x="460" y="105" text-anchor="middle" class="layer-text">podman-compose up -d</text>
    
    <rect x="380" y="130" width="160" height="30" class="command" />
    <text x="460" y="150" text-anchor="middle" class="component-text">Docker Compose互換</text>
  </g>

  <!-- Step 3: Internal Processing -->
  <g id="step3">
    <text x="700" y="70" class="section-title">3. 内部処理</text>
    
    <rect x="620" y="80" width="120" height="30" class="process" />
    <text x="680" y="100" text-anchor="middle" class="component-text">YAML解析</text>
    
    <rect x="620" y="120" width="120" height="30" class="process" />
    <text x="680" y="140" text-anchor="middle" class="component-text">依存関係解決</text>
    
    <rect x="750" y="80" width="120" height="70" class="process" />
    <text x="810" y="105" text-anchor="middle" class="component-text">Pod/Container</text>
    <text x="810" y="120" text-anchor="middle" class="component-text">作成計画</text>
    <text x="810" y="135" text-anchor="middle" class="small-text">起動順序決定</text>
  </g>

  <!-- Step 4: Resource Creation -->
  <g id="step4">
    <text x="450" y="210" text-anchor="middle" class="section-title">4. リソース作成フェーズ</text>
    
    <!-- Networks -->
    <rect x="80" y="240" width="140" height="60" class="network" />
    <text x="150" y="260" text-anchor="middle" class="layer-text">ネットワーク作成</text>
    <text x="150" y="280" text-anchor="middle" class="small-text">podman network create</text>
    <text x="150" y="295" text-anchor="middle" class="small-text">app_default</text>
    
    <!-- Volumes -->
    <rect x="240" y="240" width="140" height="60" class="volume" />
    <text x="310" y="260" text-anchor="middle" class="layer-text">ボリューム作成</text>
    <text x="310" y="280" text-anchor="middle" class="small-text">podman volume create</text>
    <text x="310" y="295" text-anchor="middle" class="small-text">app_data</text>
    
    <!-- Pod Creation -->
    <rect x="400" y="240" width="140" height="60" class="container" />
    <text x="470" y="260" text-anchor="middle" class="layer-text">Pod作成</text>
    <text x="470" y="280" text-anchor="middle" class="small-text">podman pod create</text>
    <text x="470" y="295" text-anchor="middle" class="small-text">--name app_pod</text>
    
    <!-- Images -->
    <rect x="560" y="240" width="140" height="60" class="process" />
    <text x="630" y="260" text-anchor="middle" class="layer-text">イメージプル</text>
    <text x="630" y="280" text-anchor="middle" class="small-text">podman pull nginx</text>
    <text x="630" y="295" text-anchor="middle" class="small-text">podman pull node:16</text>
  </g>

  <!-- Step 5: Container Execution -->
  <g id="step5">
    <text x="450" y="350" text-anchor="middle" class="section-title">5. コンテナ実行フェーズ</text>
    
    <rect x="100" y="380" width="120" height="80" class="container" />
    <text x="160" y="405" text-anchor="middle" class="layer-text">Web Container</text>
    <text x="160" y="420" text-anchor="middle" class="small-text">nginx:latest</text>
    <text x="160" y="435" text-anchor="middle" class="small-text">Port: 80→8080</text>
    <text x="160" y="450" text-anchor="middle" class="small-text">--pod app_pod</text>
    
    <rect x="240" y="380" width="120" height="80" class="container" />
    <text x="300" y="405" text-anchor="middle" class="layer-text">App Container</text>
    <text x="300" y="420" text-anchor="middle" class="small-text">node:16</text>
    <text x="300" y="435" text-anchor="middle" class="small-text">Port: 3000</text>
    <text x="300" y="450" text-anchor="middle" class="small-text">--pod app_pod</text>
    
    <rect x="380" y="380" width="120" height="80" class="container" />
    <text x="440" y="405" text-anchor="middle" class="layer-text">DB Container</text>
    <text x="440" y="420" text-anchor="middle" class="small-text">postgres:13</text>
    <text x="440" y="435" text-anchor="middle" class="small-text">Volume mount</text>
    <text x="440" y="450" text-anchor="middle" class="small-text">--pod app_pod</text>
    
    <!-- Health checks -->
    <rect x="520" y="380" width="120" height="80" class="process" />
    <text x="580" y="405" text-anchor="middle" class="layer-text">ヘルスチェック</text>
    <text x="580" y="420" text-anchor="middle" class="small-text">readiness probe</text>
    <text x="580" y="435" text-anchor="middle" class="small-text">liveness probe</text>
    <text x="580" y="450" text-anchor="middle" class="small-text">dependency wait</text>
  </g>

  <!-- Step 6: Running State -->
  <g id="step6">
    <text x="450" y="510" text-anchor="middle" class="section-title">6. 実行状態管理</text>
    
    <rect x="200" y="530" width="150" height="40" class="command" />
    <text x="275" y="555" text-anchor="middle" class="component-text">podman-compose ps</text>
    
    <rect x="370" y="530" width="150" height="40" class="command" />
    <text x="445" y="555" text-anchor="middle" class="component-text">podman-compose logs</text>
    
    <rect x="540" y="530" width="150" height="40" class="command" />
    <text x="615" y="555" text-anchor="middle" class="component-text">podman-compose down</text>
  </g>

  <!-- Flow arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow" />
    </marker>
  </defs>

  <!-- Horizontal flow arrows -->
  <line x1="350" y1="120" x2="380" y2="120" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="550" y1="120" x2="620" y2="120" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  
  <!-- Vertical flow arrows -->
  <line x1="460" y1="170" x2="460" y2="210" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="460" y1="310" x2="460" y2="350" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="460" y1="470" x2="460" y2="510" stroke-width="2" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Benefits -->
  <g id="benefits" transform="translate(50, 590)">
    <text x="0" y="0" class="small-text">利点: Docker Compose互換性、Pod統合管理、Kubernetes移行容易、Daemonless動作</text>
  </g>
</svg>