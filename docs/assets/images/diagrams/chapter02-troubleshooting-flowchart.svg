<svg width="900" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: 700 18px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .section-title { font: 600 14px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .node-text { font: 500 12px Inter, sans-serif; fill: var(--color-text-primary, #1a202c); }
      .component-text { font: 400 11px Inter, sans-serif; fill: var(--color-text-secondary, #4a5568); }
      .small-text { font: 400 10px Inter, sans-serif; fill: var(--color-text-secondary, #4a5568); }
      .command-text { font: 400 10px monospace; fill: var(--color-text-primary, #1a202c); }
      
      .start-node { fill: var(--color-green-100, #dcfce7); stroke: var(--color-green-400, #4ade80); stroke-width: 2; }
      .decision-node { fill: var(--color-blue-50, #ebf8ff); stroke: var(--color-blue-300, #63b3ed); stroke-width: 2; }
      .action-node { fill: var(--color-orange-50, #fffaf0); stroke: var(--color-orange-300, #f6ad55); stroke-width: 2; }
      .solution-node { fill: var(--color-purple-50, #faf5ff); stroke: var(--color-purple-300, #a78bfa); stroke-width: 2; }
      .error-node { fill: var(--color-red-50, #fef5e7); stroke: var(--color-red-300, #fc8181); stroke-width: 2; }
      .success-node { fill: var(--color-green-50, #f0fff4); stroke: var(--color-green-300, #68d391); stroke-width: 2; }
      .arrow { stroke: var(--color-gray-600, #718096); fill: var(--color-gray-600, #718096); stroke-width: 2; }
      .yes-arrow { stroke: var(--color-green-600, #16a34a); fill: var(--color-green-600, #16a34a); stroke-width: 2; }
      .no-arrow { stroke: var(--color-red-600, #dc2626); fill: var(--color-red-600, #dc2626); stroke-width: 2; }
    </style>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">Podman トラブルシューティング フローチャート</text>

  <!-- Start Node -->
  <rect x="375" y="60" width="150" height="40" rx="20" class="start-node" />
  <text x="450" y="80" text-anchor="middle" class="node-text">問題発生</text>
  <text x="450" y="95" text-anchor="middle" class="small-text">Podman実行時エラー</text>

  <!-- First Decision: Installation Check -->
  <polygon points="450,130 520,150 450,170 380,150" class="decision-node" />
  <text x="450" y="145" text-anchor="middle" class="component-text">Podmanは</text>
  <text x="450" y="160" text-anchor="middle" class="component-text">インストール済み？</text>

  <!-- Installation Actions -->
  <rect x="200" y="200" width="150" height="50" rx="10" class="action-node" />
  <text x="275" y="220" text-anchor="middle" class="component-text">インストール実行</text>
  <text x="275" y="235" text-anchor="middle" class="command-text">sudo apt install podman</text>
  <text x="275" y="248" text-anchor="middle" class="command-text">dnf install podman</text>

  <!-- Version Check -->
  <polygon points="450,200 520,220 450,240 380,220" class="decision-node" />
  <text x="450" y="215" text-anchor="middle" class="component-text">バージョン確認</text>
  <text x="450" y="230" text-anchor="middle" class="command-text">podman --version</text>

  <!-- Permission Check -->
  <polygon points="450,280 550,300 450,320 350,300" class="decision-node" />
  <text x="450" y="295" text-anchor="middle" class="component-text">権限エラー？</text>
  <text x="450" y="310" text-anchor="middle" class="small-text">permission denied</text>

  <!-- Rootless Setup -->
  <rect x="600" y="270" width="180" height="60" rx="10" class="solution-node" />
  <text x="690" y="290" text-anchor="middle" class="component-text">Rootless設定確認</text>
  <text x="690" y="305" text-anchor="middle" class="command-text">cat /etc/subuid</text>
  <text x="690" y="318" text-anchor="middle" class="command-text">cat /etc/subgid</text>

  <!-- Network Issues -->
  <polygon points="450,360 550,380 450,400 350,380" class="decision-node" />
  <text x="450" y="375" text-anchor="middle" class="component-text">ネットワークエラー？</text>
  <text x="450" y="390" text-anchor="middle" class="small-text">connection failed</text>

  <!-- Network Solutions -->
  <rect x="100" y="350" width="180" height="60" rx="10" class="solution-node" />
  <text x="190" y="370" text-anchor="middle" class="component-text">ネットワーク診断</text>
  <text x="190" y="385" text-anchor="middle" class="command-text">podman network ls</text>
  <text x="190" y="398" text-anchor="middle" class="command-text">podman network prune</text>

  <!-- Storage Issues -->
  <polygon points="450,440 550,460 450,480 350,460" class="decision-node" />
  <text x="450" y="455" text-anchor="middle" class="component-text">ストレージエラー？</text>
  <text x="450" y="470" text-anchor="middle" class="small-text">disk space, mount</text>

  <!-- Storage Solutions -->
  <rect x="600" y="430" width="180" height="60" rx="10" class="solution-node" />
  <text x="690" y="450" text-anchor="middle" class="component-text">ストレージクリーンアップ</text>
  <text x="690" y="465" text-anchor="middle" class="command-text">podman system prune -a</text>
  <text x="690" y="478" text-anchor="middle" class="command-text">df -h ~/.local/share</text>

  <!-- Runtime Issues -->
  <polygon points="450,520 550,540 450,560 350,540" class="decision-node" />
  <text x="450" y="535" text-anchor="middle" class="component-text">ランタイムエラー？</text>
  <text x="450" y="550" text-anchor="middle" class="small-text">OCI runtime error</text>

  <!-- Runtime Solutions -->
  <rect x="100" y="510" width="180" height="60" rx="10" class="solution-node" />
  <text x="190" y="530" text-anchor="middle" class="component-text">ランタイム確認</text>
  <text x="190" y="545" text-anchor="middle" class="command-text">podman info</text>
  <text x="190" y="558" text-anchor="middle" class="command-text">which runc crun</text>

  <!-- Image Issues -->
  <polygon points="450,600 550,620 450,640 350,620" class="decision-node" />
  <text x="450" y="615" text-anchor="middle" class="component-text">イメージエラー？</text>
  <text x="450" y="630" text-anchor="middle" class="small-text">pull failed, not found</text>

  <!-- Image Solutions -->
  <rect x="600" y="590" width="180" height="60" rx="10" class="solution-node" />
  <text x="690" y="610" text-anchor="middle" class="component-text">イメージ問題解決</text>
  <text x="690" y="625" text-anchor="middle" class="command-text">podman pull --debug</text>
  <text x="690" y="638" text-anchor="middle" class="command-text">podman search [image]</text>

  <!-- Final Success -->
  <rect x="375" y="680" width="150" height="40" rx="20" class="success-node" />
  <text x="450" y="700" text-anchor="middle" class="node-text">問題解決</text>
  <text x="450" y="715" text-anchor="middle" class="small-text">正常動作確認</text>

  <!-- Advanced Diagnostics -->
  <rect x="100" y="680" width="180" height="60" rx="10" class="error-node" />
  <text x="190" y="700" text-anchor="middle" class="component-text">高度な診断</text>
  <text x="190" y="715" text-anchor="middle" class="command-text">podman system info</text>
  <text x="190" y="728" text-anchor="middle" class="command-text">journalctl -xe</text>

  <!-- Arrows and connections -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow" />
    </marker>
    <marker id="yes-arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="yes-arrow" />
    </marker>
    <marker id="no-arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="no-arrow" />
    </marker>
  </defs>

  <!-- Main flow -->
  <line x1="450" y1="100" x2="450" y2="130" class="arrow" marker-end="url(#arrowhead)" />
  
  <!-- Installation check -->
  <line x1="380" y1="150" x2="275" y2="200" class="no-arrow" marker-end="url(#no-arrowhead)" />
  <text x="315" y="180" class="small-text">No</text>
  
  <line x1="520" y1="150" x2="450" y2="200" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <text x="490" y="180" class="small-text">Yes</text>
  
  <!-- From installation to version check -->
  <line x1="275" y1="250" x2="380" y2="220" class="arrow" marker-end="url(#arrowhead)" />
  
  <!-- Version to permission -->
  <line x1="450" y1="240" x2="450" y2="280" class="arrow" marker-end="url(#arrowhead)" />
  
  <!-- Permission handling -->
  <line x1="550" y1="300" x2="600" y2="300" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <text x="580" y="295" class="small-text">Yes</text>
  
  <line x1="450" y1="320" x2="450" y2="360" class="no-arrow" marker-end="url(#no-arrowhead)" />
  <text x="460" y="345" class="small-text">No</text>
  
  <!-- Network handling -->
  <line x1="350" y1="380" x2="280" y2="380" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <text x="310" y="375" class="small-text">Yes</text>
  
  <line x1="450" y1="400" x2="450" y2="440" class="no-arrow" marker-end="url(#no-arrowhead)" />
  <text x="460" y="425" class="small-text">No</text>
  
  <!-- Storage handling -->
  <line x1="550" y1="460" x2="600" y2="460" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <text x="580" y="455" class="small-text">Yes</text>
  
  <line x1="450" y1="480" x2="450" y2="520" class="no-arrow" marker-end="url(#no-arrowhead)" />
  <text x="460" y="505" class="small-text">No</text>
  
  <!-- Runtime handling -->
  <line x1="350" y1="540" x2="280" y2="540" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <text x="310" y="535" class="small-text">Yes</text>
  
  <line x1="450" y1="560" x2="450" y2="600" class="no-arrow" marker-end="url(#no-arrowhead)" />
  <text x="460" y="585" class="small-text">No</text>
  
  <!-- Image handling -->
  <line x1="550" y1="620" x2="600" y2="620" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <text x="580" y="615" class="small-text">Yes</text>
  
  <line x1="450" y1="640" x2="450" y2="680" class="no-arrow" marker-end="url(#no-arrowhead)" />
  <text x="460" y="665" class="small-text">No</text>
  
  <!-- To advanced diagnostics -->
  <line x1="350" y1="620" x2="280" y2="680" class="no-arrow" marker-end="url(#no-arrowhead)" />
  <text x="300" y="655" class="small-text">Still failing</text>
  
  <!-- Success paths -->
  <line x1="690" y1="330" x2="450" y2="680" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <line x1="690" y1="490" x2="450" y2="680" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <line x1="690" y1="650" x2="450" y2="680" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <line x1="190" y1="410" x2="375" y2="700" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
  <line x1="190" y1="570" x2="375" y2="700" class="yes-arrow" marker-end="url(#yes-arrowhead)" />

  <!-- Legend -->
  <g id="legend" transform="translate(50, 750)">
    <rect x="0" y="0" width="25" height="15" rx="3" class="decision-node" />
    <text x="30" y="12" class="small-text">判定</text>
    
    <rect x="80" y="0" width="25" height="15" rx="3" class="action-node" />
    <text x="110" y="12" class="small-text">アクション</text>
    
    <rect x="180" y="0" width="25" height="15" rx="3" class="solution-node" />
    <text x="210" y="12" class="small-text">解決策</text>
    
    <rect x="270" y="0" width="25" height="15" rx="3" class="success-node" />
    <text x="300" y="12" class="small-text">成功</text>
    
    <line x1="350" y1="7" x2="370" y2="7" class="yes-arrow" marker-end="url(#yes-arrowhead)" />
    <text x="375" y="12" class="small-text">Yes</text>
    
    <line x1="420" y1="7" x2="440" y2="7" class="no-arrow" marker-end="url(#no-arrowhead)" />
    <text x="445" y="12" class="small-text">No</text>
  </g>
</svg>