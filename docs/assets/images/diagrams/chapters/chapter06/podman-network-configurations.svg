<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="1000" viewBox="0 0 800 1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      /* Color Palette */
      :root {
        --bg-primary: #FFFFFF;
        --bg-secondary: #F8F9FA;
        --text-primary: #1A1A1A;
        --text-secondary: #6B7280;
        --primary: #3B82F6;
        --success: #10B981;
        --warning: #F59E0B;
        --error: #EF4444;
        --neutral: #6B7280;
        --border: #E5E7EB;
        --host-bg: #e3f2fd;
        --bridge-bg: #e8f5e8;
        --macvlan-bg: #fff3e0;
        --container-bg: #f3e5f5;
        --network-bg: #ffe0b2;
      }
      
      /* Dark Theme */
      @media (prefers-color-scheme: dark) {
        :root {
          --bg-primary: #1A1A1A;
          --bg-secondary: #2D2D2D;
          --text-primary: #FFFFFF;
          --text-secondary: #9CA3AF;
          --primary: #60A5FA;
          --success: #34D399;
          --warning: #FBBF24;
          --error: #F87171;
          --neutral: #9CA3AF;
          --border: #374151;
          --host-bg: #1A237E;
          --bridge-bg: #1B5E20;
          --macvlan-bg: #E65100;
          --container-bg: #4A148C;
          --network-bg: #8B4513;
        }
      }
      
      /* Typography */
      .title-text {
        font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
        font-size: 16px;
        font-weight: 600;
        text-anchor: middle;
        fill: var(--text-primary);
      }
      
      .section-title {
        font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
        font-size: 14px;
        font-weight: 600;
        text-anchor: middle;
        fill: var(--text-primary);
      }
      
      .component-title {
        font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
        font-size: 11px;
        font-weight: 500;
        text-anchor: middle;
        fill: var(--text-primary);
      }
      
      .label-text {
        font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
        font-size: 10px;
        font-weight: 400;
        text-anchor: middle;
        fill: var(--text-primary);
      }
      
      .description-text {
        font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
        font-size: 9px;
        font-weight: 400;
        text-anchor: start;
        fill: var(--text-secondary);
      }
      
      /* Node Styles */
      .host-node {
        fill: var(--host-bg);
        stroke: var(--primary);
        stroke-width: 1.5;
      }
      
      .bridge-node {
        fill: var(--bridge-bg);
        stroke: var(--success);
        stroke-width: 1.5;
      }
      
      .macvlan-node {
        fill: var(--macvlan-bg);
        stroke: var(--warning);
        stroke-width: 1.5;
      }
      
      .container-node {
        fill: var(--container-bg);
        stroke: var(--error);
        stroke-width: 1.5;
      }
      
      .network-node {
        fill: var(--network-bg);
        stroke: var(--neutral);
        stroke-width: 1.5;
      }
      
      /* Connection Lines */
      .flow-line {
        stroke: var(--primary);
        stroke-width: 2;
        marker-end: url(#arrow);
      }
      
      .shared-line {
        stroke: var(--success);
        stroke-width: 2;
        stroke-dasharray: 4,4;
        marker-end: url(#arrow-green);
      }
      
      .nat-line {
        stroke: var(--warning);
        stroke-width: 2;
        stroke-dasharray: 8,4;
        marker-end: url(#arrow-orange);
      }
    </style>
    
    <!-- Arrow Markers -->
    <marker id="arrow" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 10 4, 0 8" fill="var(--primary)"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 10 4, 0 8" fill="var(--success)"/>
    </marker>
    <marker id="arrow-orange" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 10 4, 0 8" fill="var(--warning)"/>
    </marker>
  </defs>
  
  <title>Podmanネットワーク構成図</title>
  <desc>Host、Bridge、Macvlanネットワークドライバーの動作比較</desc>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="var(--bg-primary)"/>
  
  <!-- Main Title -->
  <text x="400" y="24" class="title-text">Podmanネットワーク構成図</text>
  
  <!-- Host Network Section -->
  <rect x="50" y="60" width="700" height="20" rx="3" fill="var(--host-bg)" stroke="var(--primary)" stroke-width="1"/>
  <text x="400" y="74" class="section-title">Host Network</text>
  
  <!-- Host OS -->
  <rect x="100" y="100" width="120" height="40" rx="4" class="host-node"/>
  <text x="160" y="124" class="component-title">Host OS</text>
  
  <!-- Host Network Interface -->
  <rect x="250" y="100" width="140" height="40" rx="4" class="network-node"/>
  <text x="320" y="115" class="component-title">Host Network Interface</text>
  <text x="320" y="130" class="label-text">eth0</text>
  
  <!-- Host Container Process -->
  <rect x="420" y="100" width="120" height="40" rx="4" class="container-node"/>
  <text x="480" y="124" class="component-title">Container Process</text>
  
  <!-- Bridge Network Section -->
  <rect x="50" y="200" width="700" height="20" rx="3" fill="var(--bridge-bg)" stroke="var(--success)" stroke-width="1"/>
  <text x="400" y="214" class="section-title">Bridge Network</text>
  
  <!-- Bridge Host OS -->
  <rect x="70" y="240" width="100" height="40" rx="4" class="host-node"/>
  <text x="120" y="264" class="component-title">Host OS</text>
  
  <!-- Bridge Host eth0 -->
  <rect x="70" y="300" width="100" height="40" rx="4" class="network-node"/>
  <text x="120" y="324" class="component-title">Host eth0</text>
  
  <!-- Bridge Interface -->
  <rect x="200" y="240" width="120" height="40" rx="4" class="bridge-node"/>
  <text x="260" y="255" class="component-title">Bridge Interface</text>
  <text x="260" y="270" class="label-text">podman0</text>
  
  <!-- veth Pair -->
  <rect x="200" y="300" width="120" height="40" rx="4" class="network-node"/>
  <text x="260" y="324" class="component-title">veth Pair</text>
  
  <!-- Container eth0 -->
  <rect x="350" y="300" width="120" height="40" rx="4" class="container-node"/>
  <text x="410" y="324" class="component-title">Container eth0</text>
  
  <!-- Bridge Container Process -->
  <rect x="500" y="300" width="120" height="40" rx="4" class="container-node"/>
  <text x="560" y="324" class="component-title">Container Process</text>
  
  <!-- Macvlan Network Section -->
  <rect x="50" y="400" width="700" height="20" rx="3" fill="var(--macvlan-bg)" stroke="var(--warning)" stroke-width="1"/>
  <text x="400" y="414" class="section-title">Macvlan Network</text>
  
  <!-- Physical Switch -->
  <rect x="100" y="440" width="120" height="40" rx="4" class="network-node"/>
  <text x="160" y="464" class="component-title">Physical Switch</text>
  
  <!-- Macvlan Host eth0 -->
  <rect x="100" y="500" width="120" height="40" rx="4" class="host-node"/>
  <text x="160" y="524" class="component-title">Host eth0</text>
  
  <!-- Virtual eth0 -->
  <rect x="250" y="500" width="140" height="40" rx="4" class="macvlan-node"/>
  <text x="320" y="515" class="component-title">Virtual eth0</text>
  <text x="320" y="530" class="label-text">MAC: aa:bb:cc</text>
  
  <!-- Macvlan Container Process -->
  <rect x="420" y="500" width="120" height="40" rx="4" class="container-node"/>
  <text x="480" y="524" class="component-title">Container Process</text>
  
  <!-- Connection Lines -->
  <!-- Host Network -->
  <line x1="220" y1="120" x2="250" y2="120" class="flow-line"/>
  <line x1="390" y1="120" x2="420" y2="120" class="flow-line"/>
  <line x1="540" y1="120" x2="390" y2="120" class="shared-line"/>
  
  <!-- Bridge Network -->
  <line x1="120" y1="280" x2="120" y2="300" class="flow-line"/>
  <line x1="170" y1="260" x2="200" y2="260" class="flow-line"/>
  <line x1="200" y1="280" x2="200" y2="300" class="flow-line"/>
  <line x1="320" y1="320" x2="350" y2="320" class="flow-line"/>
  <line x1="470" y1="320" x2="500" y2="320" class="flow-line"/>
  <line x1="260" y1="280" x2="120" y2="300" class="nat-line"/>
  
  <!-- Macvlan Network -->
  <line x1="160" y1="480" x2="160" y2="500" class="flow-line"/>
  <line x1="160" y1="480" x2="320" y2="500" class="flow-line"/>
  <line x1="390" y1="520" x2="420" y2="520" class="flow-line"/>
  
  <!-- Network Driver Comparison Table -->
  <rect x="50" y="580" width="700" height="160" rx="6" fill="var(--bg-secondary)" stroke="var(--border)" stroke-width="1"/>
  <text x="400" y="600" class="section-title">ネットワークドライバー比較表</text>
  
  <!-- Table Headers -->
  <text x="70" y="625" class="component-title" text-anchor="start">ドライバー</text>
  <text x="180" y="625" class="component-title" text-anchor="start">パフォーマンス</text>
  <text x="280" y="625" class="component-title" text-anchor="start">分離性</text>
  <text x="360" y="625" class="component-title" text-anchor="start">設定複雑度</text>
  <text x="480" y="625" class="component-title" text-anchor="start">用途</text>
  
  <!-- Bridge Row -->
  <text x="70" y="645" class="description-text">Bridge</text>
  <text x="180" y="645" class="description-text">中</text>
  <text x="280" y="645" class="description-text">高</text>
  <text x="360" y="645" class="description-text">低</text>
  <text x="480" y="645" class="description-text">開発・一般用途</text>
  
  <!-- Host Row -->
  <text x="70" y="665" class="description-text">Host</text>
  <text x="180" y="665" class="description-text">最高</text>
  <text x="280" y="665" class="description-text">なし</text>
  <text x="360" y="665" class="description-text">最低</text>
  <text x="480" y="665" class="description-text">高性能要求</text>
  
  <!-- None Row -->
  <text x="70" y="685" class="description-text">None</text>
  <text x="180" y="685" class="description-text">-</text>
  <text x="280" y="685" class="description-text">最高</text>
  <text x="360" y="685" class="description-text">最低</text>
  <text x="480" y="685" class="description-text">セキュア処理</text>
  
  <!-- Macvlan Row -->
  <text x="70" y="705" class="description-text">Macvlan</text>
  <text x="180" y="705" class="description-text">高</text>
  <text x="280" y="705" class="description-text">中</text>
  <text x="360" y="705" class="description-text">高</text>
  <text x="480" y="705" class="description-text">レガシー統合</text>
  
  <!-- Key Features -->
  <rect x="50" y="780" width="700" height="180" rx="6" fill="var(--bg-secondary)" stroke="var(--border)" stroke-width="1"/>
  <text x="400" y="800" class="section-title">各ネットワークドライバーの特徴</text>
  
  <text x="70" y="825" class="component-title" text-anchor="start">Host Network:</text>
  <text x="80" y="840" class="description-text">• コンテナがホストのネットワークインターフェースを直接共有</text>
  <text x="80" y="855" class="description-text">• 最高のパフォーマンス、しかしポート競合のリスクあり</text>
  
  <text x="70" y="880" class="component-title" text-anchor="start">Bridge Network:</text>
  <text x="80" y="895" class="description-text">• デフォルトのネットワークドライバー、NAT経由で外部通信</text>
  <text x="80" y="910" class="description-text">• コンテナ間の分離とサービス発見機能を提供</text>
  
  <text x="70" y="935" class="component-title" text-anchor="start">Macvlan Network:</text>
  <text x="80" y="950" class="description-text">• 各コンテナに独自のMACアドレスを割り当て</text>
  <text x="80" y="965" class="description-text">• 物理ネットワークの一部として動作、レガシーアプリに適用</text>
  
</svg>