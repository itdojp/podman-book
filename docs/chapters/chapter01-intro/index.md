---
title: "ç¬¬1ç« ï¼šPodmanæ¦‚è¦ã¨ç’°å¢ƒæ§‹ç¯‰"
layout: book
---

# ç¬¬1ç« ï¼šPodmanæ¦‚è¦ã¨ç’°å¢ƒæ§‹ç¯‰

## å­¦ç¿’ç›®æ¨™
ã“ã®ç« ã‚’èª­ã¿çµ‚ãˆã‚‹é ƒã«ã¯ã€ä»¥ä¸‹ã®ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š
- Podmanã¨Dockerã®æœ¬è³ªçš„ãªé•ã„ã‚’èª¬æ˜ã§ãã‚‹
- Windows WSL2ç’°å¢ƒã§Podmanã‚’æ§‹ç¯‰ã§ãã‚‹
- Podman CLIã¨Podman Desktopã®ä½¿ã„åˆ†ã‘ãŒã§ãã‚‹
- åŸºæœ¬çš„ãªPodmanã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹

---

## 1.1 Podmanã¨Dockerã®é•ã„

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¯”è¼ƒ

Podmanã¨Dockerã®æœ€ã‚‚é‡è¦ãªé•ã„ã¯ã€ãã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ã‚Šã¾ã™ï¼š

![Dockerã¨Podmanã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¯”è¼ƒ]({{ '/assets/images/diagrams/chapter01-docker-podman-architecture.svg' | relative_url }})

### ä¸»è¦ãªé•ã„ã®è©³ç´°

#### 1. **ãƒ‡ãƒ¼ãƒ¢ãƒ³ãƒ¬ã‚¹è¨­è¨ˆ**

**Docker**:
- å¸¸é§ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼ˆdockerdï¼‰ãŒå¿…è¦
- ãƒ‡ãƒ¼ãƒ¢ãƒ³åœæ­¢ã§å…¨ã‚³ãƒ³ãƒ†ãƒŠãŒå½±éŸ¿
- ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ã‚’å¸¸æ™‚æ¶ˆè²»

**Podman**:
- ãƒ‡ãƒ¼ãƒ¢ãƒ³ä¸è¦ã§ç›´æ¥å®Ÿè¡Œ
- å„ã‚³ãƒ³ãƒ†ãƒŠãŒç‹¬ç«‹ã—ã¦å‹•ä½œ
- å¿…è¦æ™‚ã®ã¿ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨

#### 2. **Rootlesså®Ÿè¡Œ**

**Docker**:
```bash
# Docker (Rootæ¨©é™å¿…è¦)
sudo docker run nginx
# ã¾ãŸã¯
sudo usermod -aG docker $USER  # docker ã‚°ãƒ«ãƒ¼ãƒ—è¿½åŠ ãŒå¿…è¦
```

**Podman**:
```bash
# Podman (ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã§å®Ÿè¡Œå¯èƒ½)
podman run nginx
```

#### 3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**

| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é¢ | Docker | Podman | Podmanã®åˆ©ç‚¹ |
|---------------|--------|--------|-------------|
| **Rootæ¨©é™** | é€šå¸¸å¿…è¦ | ä¸è¦ | æ”»æ’ƒå¯¾è±¡é¢ã®ç¸®å° |
| **ãƒ‡ãƒ¼ãƒ¢ãƒ³** | å¸¸é§ | ãªã— | ãƒ—ãƒ­ã‚»ã‚¹è„†å¼±æ€§å›é¿ |
| **SELinux** | è¿½åŠ è¨­å®š | ãƒã‚¤ãƒ†ã‚£ãƒ–å¯¾å¿œ | å¼·åŒ–ã•ã‚ŒãŸã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ |

#### 4. **Podæ¦‚å¿µ**

Podmanã®æœ€å¤§ã®ç‰¹å¾´ã¯ã€**Pod**ï¼ˆè¤‡æ•°ã‚³ãƒ³ãƒ†ãƒŠã®ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã§ã™ï¼š

```
Docker Compose (å¤–éƒ¨ãƒ„ãƒ¼ãƒ«)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ docker-compose.yml                  â”‚
â”‚  services:                          â”‚
â”‚    web: nginx                       â”‚
â”‚    db: postgres                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Docker Daemon   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ nginx       â”‚  â”‚ postgres    â”‚
â”‚ Container   â”‚  â”‚ Container   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Podman Pod (ãƒã‚¤ãƒ†ã‚£ãƒ–)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pod: myapp                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Pause Container (Infrastructure) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ nginx Container                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ postgres Container              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  Shared: Network, IPC, PID          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚³ãƒãƒ³ãƒ‰äº’æ›æ€§

Podmanã¯**Docker CLIäº’æ›**ã‚’æä¾›ã—ã¦ã„ã¾ã™ï¼š

| æ©Ÿèƒ½ | Docker | Podman | äº’æ›æ€§ |
|------|--------|--------|--------|
| ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ | `docker build` | `podman build` | å®Œå…¨äº’æ› |
| ã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œ | `docker run` | `podman run` | å®Œå…¨äº’æ› |
| ã‚¤ãƒ¡ãƒ¼ã‚¸ç®¡ç† | `docker images` | `podman images` | å®Œå…¨äº’æ› |
| Podç®¡ç† | ãªã— | `podman pod` | Podmanç‹¬è‡ª |
| Compose | `docker-compose` | `podman-compose` | äº’æ›ãƒ„ãƒ¼ãƒ« |

**Dockerä»£æ›¿è¨­å®š**:
```bash
alias docker=podman
```

---

## 1.2 Windows WSL2ç’°å¢ƒã§ã®Podman

### WSL2ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£

Windowsç’°å¢ƒã§Podmanã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã€WSL2ã‚’æ´»ç”¨ã—ã¾ã™ï¼š

![Windows WSL2ç’°å¢ƒå›³]({{ '/assets/images/diagrams/chapter01-windows-wsl2-environment.svg' | relative_url }})

### è©³ç´°ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

#### ã‚¹ãƒ†ãƒƒãƒ—1: WSL2æœ‰åŠ¹åŒ–

**PowerShellï¼ˆç®¡ç†è€…æ¨©é™ï¼‰ã§å®Ÿè¡Œ**:
```powershell
# WSLæ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart

# ä»®æƒ³ãƒã‚·ãƒ³ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart

# ã‚·ã‚¹ãƒ†ãƒ å†èµ·å‹•å¾Œã€WSL2ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«è¨­å®š
wsl --set-default-version 2
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³é¸æŠ

**Ubuntu 22.04 LTSæ¨å¥¨ç†ç”±**:
- æœ€æ–°ã®Podmanãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒåˆ©ç”¨å¯èƒ½
- è±Šå¯Œãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚µãƒãƒ¼ãƒˆ
- ä¼æ¥­ç’°å¢ƒã§ã®å®Ÿç¸¾

```bash
# Ubuntu 22.04ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
wsl --install -d Ubuntu-22.04

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
wsl --list --verbose
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: Podmanã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**Ubuntuå†…ã§ã®ä½œæ¥­**:
```bash
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã®æ›´æ–°
sudo apt update && sudo apt upgrade -y

# å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y curl wget gnupg2 software-properties-common

# Podmanã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y podman

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
podman --version
podman info
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: Rootlessè¨­å®š

**UID/GIDãƒãƒƒãƒ”ãƒ³ã‚°è¨­å®š**:
```bash
# ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šç¢ºèª
cat /etc/subuid
cat /etc/subgid

# å¿…è¦ã«å¿œã˜ã¦è¨­å®šï¼ˆé€šå¸¸ã¯è‡ªå‹•è¨­å®šæ¸ˆã¿ï¼‰
echo "$USER:100000:65536" | sudo tee -a /etc/subuid
echo "$USER:100000:65536" | sudo tee -a /etc/subgid

# PodmanåˆæœŸåŒ–
podman system migrate
```

#### ã‚¹ãƒ†ãƒƒãƒ—5: å‹•ä½œç¢ºèª

**åŸºæœ¬ãƒ†ã‚¹ãƒˆ**:
```bash
# ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±ç¢ºèª
podman info

# ãƒ†ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œ
podman run hello-world

# ã‚¤ãƒ¡ãƒ¼ã‚¸ä¸€è¦§ç¢ºèª
podman images

# å®Ÿç”¨çš„ãªãƒ†ã‚¹ãƒˆ
podman run -d --name test-nginx -p 8080:80 nginx:alpine
curl http://localhost:8080
podman stop test-nginx
podman rm test-nginx
```

---

## 1.3 Podman CLI vs Podman Desktop

### æ©Ÿèƒ½æ¯”è¼ƒ

#### Podman CLI
**ç‰¹å¾´**:
- è»½é‡ã§é«˜é€Ÿ
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆåŒ–ãŒå®¹æ˜“
- æœ¬æ ¼çš„ãªé‹ç”¨ã«é©ã—ã¦ã„ã‚‹
- ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã§ã®åˆ©ç”¨

**é©ç”¨å ´é¢**:
```bash
# è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹
#!/bin/bash
podman build -t myapp .
podman run -d --name myapp-prod -p 80:8080 myapp
podman logs myapp-prod
```

#### Podman Desktop

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**:
```
Podman Desktop
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Windows                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Podman Desktop (GUI)            â”‚ â”‚
â”‚  â”‚  â”œâ”€ Imageç®¡ç†                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ Containerç®¡ç†               â”‚ â”‚
â”‚  â”‚  â””â”€ Podç®¡ç†                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ WSL2 Backend                    â”‚ â”‚
â”‚  â”‚  podman machine â†’ containers    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è©³ç´°æ¯”è¼ƒè¡¨

| å´é¢ | Podman CLI | Podman Desktop |
|------|------------|----------------|
| **ä½¿ç”¨æ–¹æ³•** | ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ | GUIæ“ä½œ |
| **ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡** | è»½é‡ | ä¸­ç¨‹åº¦ï¼ˆGUIåˆ†ï¼‰ |
| **å­¦ç¿’ã‚³ã‚¹ãƒˆ** | é«˜ï¼ˆCLIç¿’å¾—å¿…è¦ï¼‰ | ä½ï¼ˆç›´æ„Ÿçš„æ“ä½œï¼‰ |
| **è‡ªå‹•åŒ–é©æ€§** | â— é«˜ï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆåŒ–å®¹æ˜“ï¼‰ | â–³ ä¸­ï¼ˆCLIä½µç”¨å¿…è¦ï¼‰ |
| **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°** | â— é«˜ï¼ˆãƒ­ã‚°ç›´æ¥ç¢ºèªï¼‰ | â—‹ ä¸­ï¼ˆGUIçµŒç”±ç¢ºèªï¼‰ |
| **é–‹ç™ºåŠ¹ç‡** | ç†Ÿç·´è€…å‘ã‘ | åˆå¿ƒè€…å‘ã‘ |
| **ã‚µãƒ¼ãƒãƒ¼é‹ç”¨** | â— é©ã—ã¦ã„ã‚‹ | Ã— ä¸é©åˆ‡ |

### ä½¿ã„åˆ†ã‘ã®æŒ‡é‡

```
å­¦ç¿’ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥æ¨å¥¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆå¿ƒè€…ï¼ˆæ¦‚å¿µç†è§£ï¼‰                   â”‚
â”‚  â””â”€ Podman Desktopæ¨å¥¨              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åŸºæœ¬æ“ä½œç¿’å¾—                         â”‚
â”‚  â””â”€ CLI + Desktopä½µç”¨               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®Ÿè·µé–‹ç™º                             â”‚
â”‚  â””â”€ CLIä¸­å¿ƒã€Desktopè£œåŠ©            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœ¬æ ¼é‹ç”¨                             â”‚
â”‚  â””â”€ CLIå°‚ç”¨                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1.4 åŸºæœ¬æ“ä½œã®ç¢ºèª

### ã‚³ãƒ³ãƒ†ãƒŠãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

```
Container Lifecycle with Podman
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Image       â”‚â”€â”€â”€â–¶â”‚ Container   â”‚â”€â”€â”€â–¶â”‚ Running     â”‚
â”‚ (pull)      â”‚    â”‚ (create)    â”‚    â”‚ (start)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                                      â”‚
       â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Remove      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ (rm)        â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰ä½“ç³»

#### ã‚¤ãƒ¡ãƒ¼ã‚¸ç®¡ç†
```bash
# ã‚¤ãƒ¡ãƒ¼ã‚¸æ¤œç´¢
podman search nginx

# ã‚¤ãƒ¡ãƒ¼ã‚¸å–å¾—
podman pull nginx:alpine

# ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ¡ãƒ¼ã‚¸ä¸€è¦§
podman images

# ã‚¤ãƒ¡ãƒ¼ã‚¸è©³ç´°æƒ…å ±
podman inspect nginx:alpine

# ã‚¤ãƒ¡ãƒ¼ã‚¸å‰Šé™¤
podman rmi nginx:alpine

# ãƒãƒ«ãƒã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ“ãƒ«ãƒ‰
podman buildx build --platform linux/amd64,linux/arm64 -t myapp:latest .
```

#### ãƒãƒ«ãƒã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹

![ãƒãƒ«ãƒã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹å›³]({{ '/assets/images/diagrams/chapter01-multi-arch-build-process.svg' | relative_url }})

#### ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†
```bash
# ã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œï¼ˆãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
podman run -it ubuntu:22.04 /bin/bash

# ã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
podman run -d --name web -p 8080:80 nginx:alpine

# å®Ÿè¡Œä¸­ã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§
podman ps

# å…¨ã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§ï¼ˆåœæ­¢ä¸­å«ã‚€ï¼‰
podman ps -a

# ã‚³ãƒ³ãƒ†ãƒŠåœæ­¢
podman stop web

# ã‚³ãƒ³ãƒ†ãƒŠå‰Šé™¤
podman rm web

# ã‚³ãƒ³ãƒ†ãƒŠãƒ­ã‚°ç¢ºèª
podman logs web
```

#### Podç®¡ç†ï¼ˆPodmanç‹¬è‡ªï¼‰

Podmanã®Podã¯ã€Kubernetesã¨åŒæ§˜ã®æ¦‚å¿µã§ã€è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦ç®¡ç†ã§ãã¾ã™ï¼š

![Docker Compose vs Podman Podæ¯”è¼ƒå›³]({{ '/assets/images/diagrams/chapter01-docker-compose-vs-podman-pod.svg' | relative_url }})

```bash
# Podä½œæˆ
podman pod create --name myapp -p 8080:80

# Podå†…ã§ã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œ
podman run -d --pod myapp nginx:alpine

# Podä¸€è¦§
podman pod ls

# Podåœæ­¢
podman pod stop myapp

# Podå‰Šé™¤
podman pod rm myapp
```

### Podman Composeãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

![Podman Compose ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å›³]({{ '/assets/images/diagrams/chapter01-podman-compose-workflow.svg' | relative_url }})

### å®Ÿè·µçš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹

#### Webé–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰
```bash
# 1. é–‹ç™ºç”¨Podã®ä½œæˆ
podman pod create --name devenv -p 3000:3000 -p 5432:5432

# 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ãƒ†ãƒŠï¼ˆPostgreSQLï¼‰
podman run -d --pod devenv \
  --name db \
  -e POSTGRES_PASSWORD=devpass \
  -e POSTGRES_DB=myapp \
  postgres:13

# 3. Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒ†ãƒŠï¼ˆNode.jsï¼‰
podman run -d --pod devenv \
  --name web \
  -v $(pwd):/app:Z \
  -w /app \
  node:18 \
  npm start

# 4. çŠ¶æ…‹ç¢ºèª
podman pod ps
podman ps --pod

# 5. ãƒ­ã‚°ç¢ºèª
podman logs web
podman logs db

# 6. é–‹ç™ºçµ‚äº†æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
podman pod stop devenv
podman pod rm devenv
```

---

## 1.5 ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°åŸºç¤

### ä¸€èˆ¬çš„ãªå•é¡Œã¨å¯¾å‡¦æ³•

#### 1. **æ¨©é™ã‚¨ãƒ©ãƒ¼**
```bash
# å•é¡Œ: Permission denied
Error: cannot open /var/lib/containers/storage/overlay/...

# åŸå› : SELinuxã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå•é¡Œ
# å¯¾å‡¦: :Z ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆ
podman run -v /host/path:/container/path:Z image
```

#### 2. **ãƒãƒ¼ãƒˆç«¶åˆ**
```bash
# å•é¡Œ: Port already in use
Error: cannot listen on the TCP port: listen tcp :8080: bind: address already in use

# å¯¾å‡¦: ä½¿ç”¨ä¸­ãƒãƒ¼ãƒˆã‚’ç¢ºèª
ss -tlnp | grep 8080
podman ps --format "table \{\{.Names\}\}\{\{.Ports\}\}"
```

#### 3. **ã‚¤ãƒ¡ãƒ¼ã‚¸å–å¾—å¤±æ•—**
```bash
# å•é¡Œ: Registry unreachable
Error: error pulling image "nginx": unable to pull...

# å¯¾å‡¦: ãƒ¬ã‚¸ã‚¹ãƒˆãƒªè¨­å®šç¢ºèª
podman info --format json | jq .registries

# ä»£æ›¿ãƒ¬ã‚¸ã‚¹ãƒˆãƒªä½¿ç”¨
podman pull docker.io/nginx
```

#### è¨ºæ–­ã‚³ãƒãƒ³ãƒ‰é›†
```bash
# ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±
podman info

# ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨é‡
podman system df

# ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ
podman events

# ãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œ
podman --log-level debug run nginx

# ã‚·ã‚¹ãƒ†ãƒ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
podman system prune -a
```

---

## ã¾ã¨ã‚

ã“ã®ç« ã§ã¯ã€Podmanã®æ¦‚è¦ã¨ç’°å¢ƒæ§‹ç¯‰ã«ã¤ã„ã¦å­¦ç¿’ã—ã¾ã—ãŸï¼š

### ğŸ“š å­¦ç¿’ã—ãŸå†…å®¹
- **Podmanã¨Dockerã®é•ã„**: ãƒ‡ãƒ¼ãƒ¢ãƒ³ãƒ¬ã‚¹ã€Rootlessã€Podæ¦‚å¿µ
- **WSL2ç’°å¢ƒæ§‹ç¯‰**: Windowsä¸Šã§ã®Linuxã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œ
- **CLI vs Desktop**: ç”¨é€”ã«å¿œã˜ãŸä½¿ã„åˆ†ã‘
- **åŸºæœ¬æ“ä½œ**: ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ»ã‚³ãƒ³ãƒ†ãƒŠãƒ»Podç®¡ç†

### ğŸ¯ æ¬¡ç« ã¸ã®æº–å‚™
ç¬¬2ç« ã§ã¯ã€å®Ÿéš›ã®åŸºæœ¬æ“ä½œã‚’é€šã˜ã¦**Podmanã®å†…éƒ¨å‹•ä½œ**ã‚’ç†è§£ã—ã€**ã‚ˆã‚Šå®Ÿè·µçš„ãªä½¿ç”¨æ–¹æ³•**ã‚’å­¦ç¿’ã—ã¾ã™ã€‚

---

**ç†è§£åº¦ç¢ºèª**
â–¡ Podmanã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ãƒ¬ã‚¹è¨­è¨ˆã®åˆ©ç‚¹ã‚’èª¬æ˜ã§ãã‚‹  
â–¡ WSL2ç’°å¢ƒã§Podmanã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ãã‚‹  
â–¡ åŸºæœ¬çš„ãªã‚³ãƒ³ãƒ†ãƒŠæ“ä½œã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹  
â–¡ Podæ¦‚å¿µã®æ„ç¾©ã‚’ç†è§£ã—ã¦ã„ã‚‹